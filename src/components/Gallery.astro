---
// Gallery Component - Displays Facebook posts in a responsive grid
import { siteConfig } from "../config.js";

interface Props {
  posts: Array<{
    id: number;
    text: string;
    localImages: string[];
    timestamp: string;
  }>;
}

const { posts } = Astro.props;
// Limit explicit posts if needed or handle logic
// For now, displaying all passed posts
---

<section id="gallery" class="section-padding bg-slate-50">
  <div class="container-custom">
    <div class="text-center max-w-3xl mx-auto mb-16">
      <h2 class="text-3xl lg:text-4xl font-bold text-slate-900 mb-4">
        Our Impact in Action
      </h2>
      <p class="text-gray-600">
        A glimpse into our daily social welfare activities and community
        engagements.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {
        posts.map((post) => (
          <article class="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 flex flex-col h-full border border-gray-100">
            {post.localImages && post.localImages.length > 0 && (
              <div class="relative aspect-video bg-gray-100 overflow-hidden group">
                <img
                  src={post.localImages[0]}
                  alt={`Activity from ${post.timestamp}`}
                  loading="lazy"
                  class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                />
                {post.localImages.length > 1 && (
                  <div class="absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white px-3 py-1 rounded-full text-xs font-semibold">
                    +{post.localImages.length - 1} more
                  </div>
                )}
              </div>
            )}

            <div class="p-6 flex-1 flex flex-col">
              {post.text && (
                <div class="mb-4 flex-1">
                  <p class="text-gray-700 text-sm leading-relaxed line-clamp-3">
                    {post.text}
                  </p>
                </div>
              )}

              {post.timestamp && (
                <div class="pt-4 border-t border-gray-50 flex items-center justify-between text-xs text-gray-500 font-medium">
                  <time>{post.timestamp}</time>
                  <span class="text-blue-900 bg-blue-50 px-2 py-1 rounded-md">
                    Updates
                  </span>
                </div>
              )}
            </div>
          </article>
        ))
      }
    </div>

    <div class="mt-12 text-center">
      <a
        href={siteConfig.social.facebook}
        target="_blank"
        rel="noopener noreferrer"
        class="btn-secondary"
      >
        View All Updates on Facebook
      </a>
    </div>
  </div>
</section>
